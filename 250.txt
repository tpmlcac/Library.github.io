<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åœ–æ›¸é¤¨æ¢éšªå®¶ - ç¾åœ‹ 250 æ™‚ç©ºèˆªè¡Œ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap');
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f8fafc;
        }

        .card {
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            perspective: 1000px;
        }

        .card-inactive {
            filter: grayscale(100%) brightness(70%);
            cursor: pointer;
        }

        .card-active {
            filter: none;
            transform: scale(1.05);
            box-shadow: 0 10px 25px rgba(245, 158, 11, 0.4);
            border: 4px solid #f59e0b;
        }

        .glow {
            animation: glow-pulse 2s infinite;
        }

        @keyframes glow-pulse {
            0% { box-shadow: 0 0 5px #f59e0b; }
            50% { box-shadow: 0 0 20px #fbbf24; }
            100% { box-shadow: 0 0 5px #f59e0b; }
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(15, 23, 42, 0.9);
            z-index: 50;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal.active {
            display: flex;
        }

        .hint-img {
            width: 100%;
            max-height: 250px;
            object-fit: cover;
            border-radius: 12px;
            margin-bottom: 1rem;
            border: 3px solid #e2e8f0;
        }

        .story-box {
            background: linear-gradient(135deg, #1e40af 0%, #1e3a8a 100%);
            color: white;
        }
    </style>
</head>
<body class="min-h-screen pb-10">

    <!-- Header & Story Introduction -->
    <header class="story-box text-white py-8 px-6 shadow-xl text-center mb-8 relative overflow-hidden">
        <div class="relative z-10">
            <h1 class="text-3xl font-bold mb-2">æ™‚ç©ºæ¢éšªå®¶ï¼šè§£é–250å¹´çš„ç§˜å¯†</h1>
            <div class="max-w-2xl mx-auto text-sm md:text-base opacity-90 leading-relaxed bg-black/20 p-4 rounded-lg inline-block">
                æ¢éšªå®¶ä½ å¥½ï¼æˆ‘å€‘æ”¶åˆ°ä¸€å°ä¾†è‡ª2027å¹´çš„æ±‚æ•‘ä¿¡ï¼Œ<br>
                ç¾åœ‹å»ºåœ‹250é€±å¹´çš„ã€Œæ™‚ç©ºä¹‹é‘°ã€ç¢æˆäº†äº”ç‰‡ï¼Œæ•£è½åœ¨åœ–æ›¸é¤¨å„è™•ã€‚<br>
                éœ€è¦ä½ é‹ç”¨è§€å¯ŸåŠ›æ‰¾å‡ºç¢ç‰‡ï¼Œé–‹å•Ÿé€šå¾€æ…¶å…¸çš„å¤§é–€ï¼
            </div>
        </div>
    </header>

    <main class="max-w-4xl mx-auto px-4">
        <!-- Progress Bar -->
        <div class="mb-8 bg-white p-4 rounded-xl shadow-sm border border-gray-100">
            <div class="flex justify-between mb-2">
                <span class="text-sm font-medium text-blue-700">æ­·å²ç¢ç‰‡æ”¶é›†é€²åº¦</span>
                <span id="progress-text" class="text-sm font-medium text-blue-700">0 / 5</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-4">
                <div id="progress-bar" class="bg-gradient-to-r from-blue-600 to-red-500 h-4 rounded-full transition-all duration-500" style="width: 0%"></div>
            </div>
        </div>

        <!-- Cards Grid -->
        <div class="grid grid-cols-2 md:grid-cols-5 gap-4 mb-10">
            <!-- Card 1 -->
            <div id="card-0" onclick="handleCardClick(0)" class="card card-inactive bg-white rounded-2xl p-4 flex flex-col items-center text-center shadow-md border-2 border-transparent">
                <div class="text-4xl mb-2">ğŸš¢</div>
                <div class="font-bold">èˆªå‘æ–°ä¸–ç•Œ</div>
                <div id="status-0" class="text-xs mt-2 text-gray-500">å°‹æ‰¾ç¢ç‰‡ 1</div>
            </div>
            <!-- Card 2 -->
            <div id="card-1" onclick="handleCardClick(1)" class="card card-inactive bg-white rounded-2xl p-4 flex flex-col items-center text-center shadow-md border-2 border-transparent">
                <div class="text-4xl mb-2">âš¡</div>
                <div class="font-bold">å¯Œè˜­å…‹æ—çš„é¢¨ç®</div>
                <div id="status-1" class="text-xs mt-2 text-gray-500">å°‹æ‰¾ç¢ç‰‡ 2</div>
            </div>
            <!-- Card 3 -->
            <div id="card-2" onclick="handleCardClick(2)" class="card card-inactive bg-white rounded-2xl p-4 flex flex-col items-center text-center shadow-md border-2 border-transparent">
                <div class="text-4xl mb-2">ğŸ“œ</div>
                <div class="font-bold">è‡ªç”±çš„å®£è¨€</div>
                <div id="status-2" class="text-xs mt-2 text-gray-500">å°‹æ‰¾ç¢ç‰‡ 3</div>
            </div>
            <!-- Card 4 -->
            <div id="card-3" onclick="handleCardClick(3)" class="card card-inactive bg-white rounded-2xl p-4 flex flex-col items-center text-center shadow-md border-2 border-transparent">
                <div class="text-4xl mb-2">ğŸš€</div>
                <div class="font-bold">å‰µæ–°èˆ‡ç§‘æŠ€</div>
                <div id="status-3" class="text-xs mt-2 text-gray-500">å°‹æ‰¾ç¢ç‰‡ 4</div>
            </div>
            <!-- Card 5 -->
            <div id="card-4" onclick="handleCardClick(4)" class="card card-inactive bg-white rounded-2xl p-4 flex flex-col items-center text-center shadow-md border-2 border-transparent">
                <div class="text-4xl mb-2">ğŸ†</div>
                <div class="font-bold">æ…¶ç¥ 250 é€±å¹´</div>
                <div id="status-4" class="text-xs mt-2 text-gray-500">å°‹æ‰¾ç¢ç‰‡ 5</div>
            </div>
        </div>

        <div class="text-center text-gray-500 text-sm italic">
            ğŸ’¡ é»æ“Šä¸Šæ–¹çš„é—œå¡å¡ç‰‡ä¾†æŸ¥çœ‹æç¤ºä¸¦è¼¸å…¥è§£é–ä»£ç¢¼
        </div>
    </main>

    <!-- Modal: Hint/Question/Input -->
    <div id="modal" class="modal">
        <div class="bg-white rounded-2xl max-w-md w-full p-6 shadow-2xl relative overflow-y-auto max-h-[90vh]">
            <button onclick="closeModal()" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600 z-10 bg-white rounded-full p-1 shadow">âœ•</button>
            <div id="modal-content">
                <!-- Dynamic Content -->
            </div>
        </div>
    </div>

    <!-- Final Hidden Level -->
    <div id="final-modal" class="modal">
        <div class="bg-gradient-to-br from-red-600 via-white to-blue-700 p-1 rounded-3xl max-w-lg w-full shadow-2xl">
            <div class="bg-white rounded-[22px] p-8 text-center">
                <div class="flex justify-center gap-2 mb-4">
                    <span class="text-5xl">ğŸŠ</span>
                    <span class="text-6xl font-black text-blue-900">250</span>
                    <span class="text-5xl">ğŸŠ</span>
                </div>
                <h2 class="text-2xl font-bold mb-4 text-blue-800">æ™‚ç©ºä¹‹é‘°å·²ä¿®å¾©ï¼</h2>
                <div class="text-left bg-blue-50 p-4 rounded-xl mb-6 text-sm md:text-base text-gray-700 leading-relaxed border-l-4 border-blue-500">
                    <p class="mb-2"><strong>è¦ªæ„›çš„æ¢éšªå®¶ï¼š</strong></p>
                    <p>ä½ å·²æˆåŠŸç©¿è¶Šæ™‚ç©ºï¼ç¾åœ‹å³å°‡åœ¨ 2026 å¹´è¿ä¾†å»ºåœ‹ 250 é€±å¹´ã€‚å¾ 1776 å¹´çš„ã€Šç¨ç«‹å®£è¨€ã€‹åˆ°ä»Šæ—¥çš„ç§‘æŠ€èˆ‡å¤šå…ƒæ–‡åŒ–ï¼Œé€™æ˜¯ä¸€å ´é—œæ–¼ã€Œè‡ªç”±ã€çš„å£¯å¤§æ—…ç¨‹ã€‚</p>
                    <p class="mt-2 font-bold text-red-600">è«‹å‰å¾€åœ–æ›¸é¤¨æœå‹™å°ï¼ˆç‰¹å±•å€ï¼‰ï¼Œå‘é¤¨å“¡é ˜å–ã€ŒAmerica250 æ¢éšªç´€å¿µçå‹µã€ï¼</p>
                </div>
                <button onclick="closeFinalModal()" class="w-full bg-blue-900 text-white font-bold py-4 rounded-xl shadow-lg hover:bg-blue-800 transition transform active:scale-95">å®Œæˆä»»å‹™</button>
            </div>
        </div>
    </div>

    <script>
        const questData = [
            {
                hintTitle: "æ•…äº‹çš„èµ·é»ï¼šåœ¨1æ¨“æ‰¾æ‰¾ï¼Œä»Šå¹´å¯’å‡é–±è®€ç¯€æ˜¯ä»‹ç´¹å“ªå€‹åœ‹å®¶å‘¢ï¼Ÿã€‚",
                hintImage: "https://lh3.googleusercontent.com/u/0/d/14063RDGtNvicj-CV7w5ZGm-HQkSEjNHR", 
                qrKey: "æ³°åœ‹",
                question: "å¯’å‡é–±è®€ç¯€çš„ä¸»é¡Œæ˜¯ï¼Ÿ",
                options: ["ã€Œæ³°ã€æƒ³è¦‹ä½ ", "ã€Œæ³°ã€äº«é–±è®€", "ã€Œæ³°ã€æœƒè®€æ›¸", "ã€Œæ³°ã€åº¦æ±ºå®šä¸€åˆ‡"],
                answer: 1,
                icon: "ğŸš¢"
            },
            {
                hintTitle: "ç§‘å­¸èˆ‡è§€å¯Ÿï¼šå¯Œè˜­å…‹æ—åœ¨é›·é›¨ä¸­æ”¾é¢¨ç®ï¼Œè«‹æ‰¾åˆ°æŸ¥è©¢è³‡æ–™çš„é›»è…¦å€ã€‚",
                hintImage: "https://placehold.co/600x400/3b82f6/white?text=æŸ¥è©¢é›»è…¦å€ç…§ç‰‡",
                qrKey: "USA02",
                question: "ç¾åœ‹å»ºåœ‹å…ƒå‹³å¯Œè˜­å…‹æ—ï¼Œé™¤äº†æ”¿æ²»å®¶ä»–é‚„æ˜¯ç™¼æ˜ä»€éº¼çš„ç§‘å­¸å®¶ï¼Ÿ",
                options: ["é›»ç‡ˆæ³¡", "é¿é›·é‡", "é›»è©±æ©Ÿ", "é£›æ©Ÿ"],
                answer: 1,
                icon: "âš¡"
            },
            {
                hintTitle: "è‡ªç”±çš„å®£è¨€ï¼šè«‹æ‰¾åˆ°é¤¨å…§çš„ã€Œå…’ç«¥ç¹ªæœ¬å€ã€ï¼Œå°‹æ‰¾æœ‰é—œè‡ªç”±çš„æ•…äº‹ã€‚",
                hintImage: "https://placehold.co/600x400/ef4444/white?text=ç¹ªæœ¬å€ç…§ç‰‡",
                qrKey: "USA03",
                question: "1776 å¹´ç¾åœ‹åœ¨å“ªä¸€ä»½é‡è¦æ–‡ä»¶ä¸­å®£å¸ƒäº†æ‰€æœ‰äººç”Ÿè€Œå¹³ç­‰ï¼Ÿ",
                options: ["æ¬Šåˆ©æ³•æ¡ˆ", "ç¨ç«‹å®£è¨€", "æ†²æ³•è‰æ¡ˆ", "è‡ªç”±ä¹‹æ›¸"],
                answer: 1,
                icon: "ğŸ“œ"
            },
            {
                hintTitle: "é‚å‘æœªä¾†ï¼šå¾é˜¿æ³¢ç¾…è¨ˆç•«åˆ°ç¾ä»£ç§‘æŠ€ï¼Œè«‹æ‰¾åˆ°ã€Œæ–°æ›¸å±•ç¤ºå€ã€ã€‚",
                hintImage: "https://placehold.co/600x400/10b981/white?text=æ–°æ›¸å±•ç¤ºå€ç…§ç‰‡",
                qrKey: "USA04",
                question: "ç¾åœ‹æ˜¯ç¬¬ä¸€å€‹å®Œæˆå“ªé …äººé¡å£¯èˆ‰ï¼Œå±•ç¤ºäº†å‰µæ–°çš„ç²¾ç¥ï¼Ÿ",
                options: ["ç™¼æ˜è…³è¸è»Š", "äººé¡ç™»é™¸æœˆçƒ", "ç™¼ç¾åœ°å¿ƒå¼•åŠ›", "ç’°éŠä¸–ç•Œä¸€å‘¨"],
                answer: 1,
                icon: "ğŸš€"
            },
            {
                hintTitle: "250 é€±å¹´ç‰¹å±•ï¼šè«‹æ‰¾åˆ°é€™å¼µå……æ»¿æ…¶ç¥æ°£æ°›çš„ç…§ç‰‡ï¼ˆç‰¹å±•æµ·å ±è™•ï¼‰ã€‚",
                hintImage: "https://placehold.co/600x400/8b5cf6/white?text=å»ºåœ‹250é€±å¹´æµ·å ±ä½ç½®",
                qrKey: "USA05",
                question: "ç¾åœ‹å»ºåœ‹ 250 é€±å¹´ (America250) çš„æ ¸å¿ƒæ…¶ç¥ç²¾ç¥æ˜¯ä»€éº¼ï¼Ÿ",
                options: ["ç¡è¦ºèˆ‡ä¼‘æ¯", "å¤šå…ƒã€è‡ªç”±èˆ‡æœªä¾†", "è²·æ±è¥¿èˆ‡è³¼ç‰©", "è€ƒè©¦èˆ‡å¯«ä½œæ¥­"],
                answer: 1,
                icon: "ğŸ†"
            }
        ];

        let gameState = {
            completed: [false, false, false, false, false],
            currentTask: null
        };

        function init() {
            updateProgress();
        }

        // é»æ“Šé—œå¡å¡ç‰‡
        function handleCardClick(index) {
            if (gameState.completed[index]) {
                showModal(`
                    <div class="text-center p-4">
                        <div class="text-6xl mb-4">ğŸ’</div>
                        <h2 class="text-2xl font-bold text-blue-600 mb-2">æ­·å²ç¢ç‰‡å·²æ”¶é›†</h2>
                        <p class="text-gray-600">ä½ å·²ç¶“æˆåŠŸç²å¾—äº†é€™ä¸€å€çš„ç¢ç‰‡ï¼</p>
                    </div>
                `);
                return;
            }

            gameState.currentTask = index;
            const task = questData[index];
            showModal(`
                <div class="text-center">
                    <h2 class="text-xl font-bold text-blue-800 mb-2">ğŸ“ ç¬¬ ${index+1} å€‹ç¢ç‰‡ä½ç½®</h2>
                    <p class="text-gray-600 text-sm mb-4">ä¾ç…§ä¸‹æ–¹ç…§ç‰‡ç·šç´¢ï¼Œå»ç¾å ´æ‰¾å°‹ç­”æ¡ˆå§ï¼</p>
                    <img src="${task.hintImage}" alt="æç¤ºç…§ç‰‡" class="hint-img shadow-lg" onerror="this.src='https://placehold.co/600x400?text=ç…§ç‰‡è¼‰å…¥ä¸­...'">
                    <p class="text-base text-gray-800 font-bold mb-6">${task.hintTitle}</p>
                    
                    <div class="bg-blue-50 p-6 rounded-2xl border-2 border-blue-200">

                        <div class="flex flex-col gap-2">
                            <input type="text" id="modal-qr-input" placeholder="åœ¨æ­¤è¼¸å…¥ç­”æ¡ˆ" 
                                class="w-full px-4 py-3 border-2 border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 uppercase font-bold text-center">
                            <button onclick="checkPasscode(${index})" 
                                class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg transition shadow-md">
                                ç¢ºèª
                            </button>
                        </div>
                    </div>
                </div>
            `);
        }

        // æª¢æŸ¥å½ˆçª—å…§çš„å¯†ç¢¼
        function checkPasscode(index) {
            const input = document.getElementById('modal-qr-input').value.trim().toUpperCase();
            if (!input) return;

            const task = questData[index];
            
            if (input === task.qrKey) {
                // ä»£ç¢¼æ­£ç¢ºï¼Œé€²å…¥é¡Œç›®ç’°ç¯€
                showQuestion(index);
            } else {
                alert("âŒ ä»£ç¢¼ä¸æ­£ç¢ºï¼è«‹ç¢ºèªä½ æ‰€åœ¨çš„åœ°é»æ˜¯å¦æ­£ç¢ºï¼Œæˆ–æ˜¯æª¢æŸ¥ä»£ç¢¼æœ‰æ²’æœ‰è¼¸å…¥éŒ¯èª¤å–”ã€‚");
            }
        }

        function showQuestion(index) {
            gameState.currentTask = index;
            const task = questData[index];
            
            let optionsHtml = task.options.map((opt, i) => `
                <button onclick="checkAnswer(${i})" class="w-full text-left p-4 mb-3 border-2 border-gray-100 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition active:scale-95">
                    <span class="inline-block w-8 h-8 bg-blue-600 text-white rounded-full text-center leading-8 mr-3 font-bold">${i+1}</span>
                    <span class="text-gray-700 font-medium">${opt}</span>
                </button>
            `).join('');

            showModal(`
                <div>
                    <div class="flex items-center gap-2 mb-4">
                        <span class="text-3xl">${task.icon}</span>
                        <h2 class="text-xl font-bold">è§£é–ç¢ç‰‡ä»»å‹™ï¼š${index + 1}</h2>
                    </div>
                    <p class="text-lg text-gray-800 mb-6 font-bold leading-relaxed">${task.question}</p>
                    <div class="space-y-1">
                        ${optionsHtml}
                    </div>
                </div>
            `);
        }

        function checkAnswer(selectedIndex) {
            const task = questData[gameState.currentTask];
            if (selectedIndex === task.answer) {
                gameState.completed[gameState.currentTask] = true;
                updateCardUI(gameState.currentTask);
                updateProgress();
                
                showModal(`
                    <div class="text-center p-4">
                        <div class="text-6xl mb-4 animate-bounce">âœ¨</div>
                        <h2 class="text-2xl font-bold text-green-600 mb-2">æ­£ç¢ºç­”æ¡ˆï¼</h2>
                        <p class="text-gray-600 mb-6">ä½ ç²å¾—äº†ä¸€å€‹æ­·å²ç¢ç‰‡ï¼</p>
                        <button onclick="closeModal()" class="bg-blue-600 text-white px-10 py-3 rounded-full font-bold shadow-lg transition active:scale-95">ç¹¼çºŒæ¢éšª</button>
                    </div>
                `);

                checkGameWin();
            } else {
                alert("ğŸ˜¢ å“å‘€ï¼Œæ­·å²ç´€éŒ„ä¼¼ä¹ä¸æ˜¯é€™æ¨£å–”ã€‚å†è©¦ä¸€æ¬¡ï¼");
            }
        }

        function updateCardUI(index) {
            const card = document.getElementById(`card-${index}`);
            const status = document.getElementById(`status-${index}`);
            
            card.classList.remove('card-inactive');
            card.classList.add('card-active', 'glow');
            status.innerText = "ç¢ç‰‡å·²æ”¶é›† âœ¨";
            status.classList.remove('text-gray-500');
            status.classList.add('text-blue-600', 'font-bold');
        }

        function updateProgress() {
            const doneCount = gameState.completed.filter(c => c).length;
            const percent = (doneCount / 5) * 100;
            document.getElementById('progress-bar').style.width = `${percent}%`;
            document.getElementById('progress-text').innerText = `${doneCount} / 5`;
        }

        function checkGameWin() {
            if (gameState.completed.every(c => c)) {
                setTimeout(() => {
                    document.getElementById('final-modal').classList.add('active');
                }, 1000);
            }
        }

        function showModal(content) {
            document.getElementById('modal-content').innerHTML = content;
            document.getElementById('modal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('modal').classList.remove('active');
        }

        function closeFinalModal() {
            document.getElementById('final-modal').classList.remove('active');
        }

        window.onload = init;
    </script>
</body>
</html>